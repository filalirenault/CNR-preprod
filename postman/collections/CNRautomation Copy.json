{
	"info": {
		"_postman_id": "b2623e9e-289a-412b-b2e7-bfde23bc6f61",
		"name": "CNRautomation Copy",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_uid": "26626745-b2623e9e-289a-412b-b2e7-bfde23bc6f61"
	},
	"item": [
		{
			"name": "Get the token",
			"item": [
				{
					"name": "cnr generate access_token",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "6c87c77c-6ff1-4971-a847-821255aac1b5",
								"exec": [
									"// okta environment endpoint",
									"const AUD = \"https://sso-dev.renault.com/oauth2/austmw35vFS9ZhxVY416/v1/token\";",
									"//const AUD = \"https://sso-uat.renault.com/oauth2/austwoeshbCkPJyw1416/v1/token\";",
									"//const AUD = \"https://sso.renault.com/oauth2/aus133y6mks4ptDss417/v1/token\";",
									"   ",
									"// client id of your application",
									"const CLIENT_ID=\"irn-74772_dev_pkjwt_w7djluvltrxp\";",
									"  ",
									"// certificate kid (cf. https://synergyprod1.service-now.com/it?id=sc_cat_item&sys_id=04c550d9878d011096bb20aabbbb35c1 )",
									"const KID=\"2025-03-13-2511347\";",
									"  ",
									"// your certificate private key",
									"const PRIVATE_KEY = \"-----BEGIN PRIVATE KEY-----\\",
									"MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC/z56kyzwmNNmp\\",
									"A4zqqp43jPTqpU5TSpmR8r3NTtPuAfL5MUqjarsfGxiKDbFgUTv+DHSZIeAU3ZaJ\\",
									"Oa/Uclo4OKrq3wH2ZlLIuYz7lwbReSuAmE1WRKbLsEtO+qYw9OLrnzYPACF79Irp\\",
									"lydKjrFGV5vbckamUNAuoTKkh/8PKTsDANtik0X/KzwdwOI1guA78OSWREuH9xc5\\",
									"yBg+LfXf7JVQMerhVWerdkWfszKmzd7IHJvk5sZkm6d0ju6AZ4ewdEyozDQTdEdP\\",
									"32+tKgkusKNwNtl05AEFmx3PplecETz+1cLjkQVRVAmdz7Uw/AtV2cB3qG/jHH92\\",
									"po0o+ULxAgMBAAECggEAZwubJt0oSz5JUMtfgRJ4PU+0o/p6wbRqHEZUQV//6vWR\\",
									"Gt6oQnKsZGGiJUiF6kC6Ahme6kWQpKUGomIjW/azEVEgQV3dKAqAnuVQIDlaqF54\\",
									"SHWJ1ra7BOKJEr0FW3e0EPFPkW94jacqmaNisGNISYn3aUVTPzZbITHoiwuksvd9\\",
									"R9uhUuHDZ2WBSppVOuejW3jrK0Ea5gCCeBusBJtCyoewPa9oEgOyrHGxUwXqxQJ9\\",
									"1FCVODOofSTZRO0WWzuUs9bTF98dAy8flNrSSRBM8idRSgiedYSPguwz57VlSkBc\\",
									"zm1fsfWV0HQF4M7XxhmHy/tTuIeneiKP9phAwATLgQKBgQDlZ7kMv9CO15mOj+w3\\",
									"5BZhq9QmZq6v4awXbB4xRycpgJLoazwmK6V2VrgKmZ164Zy/7IfvVlqPVp1UbYRN\\",
									"Q+ecXuG8U1H0M/lBAShwRZJphPHEHlIiSOHsOsald4ZlWLPFFDWPK0A9xtQacd+3\\",
									"FqH253yZ2uaj/sugSG+aVHUHlQKBgQDWDC3a+nTXFKhb04xrzpE2HtOxaqcSb7S/\\",
									"DqbKDZnpPXpndc1qa/XTx8TR4PqRtOyxkU+d5IO3qNuNER3cGcJKQQbopK/nUttj\\",
									"0EwIKO0Hl66tKzKKoNjNmQK4/9C+FqaI9/0cZjOFtVtM2JsP7Lz7UgNXNpaioyb5\\",
									"o4oEoLTG7QKBgHl886gH0RhEn4K7P3rd5Oh2yhRIHszwM2X4EQlByECXYbWKTMFe\\",
									"LfM8u5yJe7e+0XdmeRrL3Yu5b/ptQTp18quCKAPHEEjGWYMObO8AOSh+ila1RAP6\\",
									"GwMyoU6xvM/hKNr+99pJKm1M5bjXg4V/i+io8Pi9z5Ub85R/p/LQNWX9AoGAf5XS\\",
									"32vaqTlPAS0fzkLam3/UfzQrUfnzqs547Ice7sAObgzx3DVt2kaBMvj/YkqNq2oK\\",
									"IvtK5/Zmp7dELSXNgaUxEQrZLvFchCpsp5B9eMEZBW9yON+XWzWRQeR58FRf/9SR\\",
									"spPYsiJfwXZ7NwrNuqAwDZQkRd0qJjMs2YVRPCECgYEA0Sd/SAdNOlonflgO1T/R\\",
									"YiC4zb6kvSI31VyYCmuXJBFF/ndUZ0uk3UPaPpAdb3p12/RjgYbQ7fkyhLv4I3lo\\",
									"nBspgzqpUmoAy6g8wrz78P6aCkLlmuW9evS3o1XvhPzFnvB7MZ43bKjaktx+/fET\\",
									"0Zy8uQlUJn88kCDglG+FjIo=\\",
									"-----END PRIVATE KEY-----\";",
									"   ",
									"//life time of the assertion in seconds",
									"const LIFE_TIME = 300;",
									"  ",
									"/********** END CONST ******************/",
									"   ",
									"var navigator = {};",
									"var window = {};",
									"pm.sendRequest('https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/8.0.20/jsrsasign-all-min.js', (err, res) => {",
									"eval(res.text());",
									"   ",
									"// Set headers for JWT",
									"var header = {",
									"    \"kid\": KID,",
									"    \"alg\": \"RS256\"",
									"};",
									"   ",
									"// Prepare timestamp in seconds",
									"var currentTimestamp = Math.floor(Date.now() / 1000);",
									"   ",
									"var data = {",
									"  \"aud\": AUD,",
									"  \"exp\": currentTimestamp + LIFE_TIME,",
									"  \"iss\": CLIENT_ID,",
									"  \"sub\": CLIENT_ID,",
									"  \"iat\": currentTimestamp,",
									"  \"jti\": generateUUID()",
									" ",
									"};",
									"   ",
									"var sHeader = JSON.stringify(header);",
									"var sPayload = JSON.stringify(data);",
									"   ",
									"var sJWT = KJUR.jws.JWS.sign(header.alg, sHeader, sPayload, PRIVATE_KEY);",
									"   ",
									"pm.environment.set('client_assertion', sJWT)",
									"});",
									" ",
									"function generateUUID() { ",
									"    var d = new Date().getTime();",
									"    var d2 = ((typeof performance !== 'undefined') && performance.now && (performance.now()*1000)) || 0;",
									"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
									"        var r = Math.random() * 16;",
									"        if(d > 0){",
									"            r = (d + r)%16 | 0;",
									"            d = Math.floor(d/16);",
									"        } else {",
									"            r = (d2 + r)%16 | 0;",
									"            d2 = Math.floor(d2/16);",
									"        }",
									"        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);",
									"    });",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "15faec34-7c82-4f7a-b2cb-3240756fe9d0",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"postman.setEnvironmentVariable(\"cnr_okta_token\", jsonData.access_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "eda187f9-e615-49aa-be05-d23e90770eda",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "client_credentials",
									"type": "text"
								},
								{
									"key": "scope",
									"value": "apis.default ",
									"type": "text"
								},
								{
									"key": "client_assertion_type",
									"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
									"type": "text"
								},
								{
									"key": "client_assertion",
									"value": "{{client_assertion}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://sso-dev.renault.com/oauth2/austmw35vFS9ZhxVY416/v1/token",
							"protocol": "https",
							"host": [
								"sso-dev",
								"renault",
								"com"
							],
							"path": [
								"oauth2",
								"austmw35vFS9ZhxVY416",
								"v1",
								"token"
							]
						}
					},
					"response": []
				}
			],
			"id": "194e53b7-232b-4552-a4b1-529474fac7a4"
		},
		{
			"name": "Confirmation de souscription OK",
			"item": [
				{
					"name": "Get the eligible services",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a9503d50-833b-47dc-aae6-ac392da107ab",
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									"postman.setEnvironmentVariable(\"FirstCOffer\", jsonData[0].contextualOfferId);\r",
									"\r",
									"var jsonData = JSON.parse(responseBody);\r",
									"postman.setEnvironmentVariable(\"FirstGOffer\", jsonData[0].genericOfferId);\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "b99f9d28-c211-4289-96f7-bb04e1401068",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/eligible-offers",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"eligible-offers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "190d7aa4-3107-44a3-939c-c9f787786270",
								"exec": [
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"var vin = pm.environment.get(\"vin\");\r",
									"pm.test(\"The vin >\"+vin+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(vin);\r",
									"});\r",
									"\r",
									"var FirstCOffer = pm.environment.get(\"FirstCOffer\");\r",
									"pm.test(\"The cOffer >\"+FirstCOffer+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(FirstCOffer);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "95cd853e-2a43-42e1-941c-e061f801cfad",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"{{FirstCOffer}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a60f5870-ddbd-4e4f-899a-e503bb3432b2",
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "ae85f3de-b0f7-4f2a-8d8b-1a92818177d8",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"genericOfferId\": \"{{FirstGOffer}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/event",
							"host": [
								"{{url}}"
							],
							"path": [
								"event"
							]
						}
					},
					"response": []
				},
				{
					"name": "End the subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bdd7e903-72cd-4d1b-b42e-05decf8c2f58",
								"exec": [
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"var vin = pm.environment.get(\"vin\");\r",
									"pm.test(\"The vin >\"+vin+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(vin);\r",
									"});\r",
									"\r",
									"var FirstGOffer = pm.environment.get(\"FirstGOffer\");\r",
									"pm.test(\"The gOffer >\"+FirstGOffer+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(FirstGOffer);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "1fa21df6-fbef-4127-bdf9-6975a20b4dda",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/{{FirstGOffer}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"{{FirstGOffer}}"
							]
						}
					},
					"response": []
				}
			],
			"id": "fed9fe58-de09-475d-9888-ddaecca578a4"
		},
		{
			"name": "Get the subscriptions for a VIN OK",
			"item": [
				{
					"name": "Get the subscriptions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5fa0e1a1-b43b-467c-83d7-1004abb5a025",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "73fb0121-06d6-42da-919d-1799c2936e46",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get the subscription events",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "73e8824c-0ac1-4e4e-a128-710b3f2e6f6a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "dfc9b9ae-a575-4077-955f-8441f491e9fd",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/a19bcfc9-3769-45bb-a9d2-0f5146f93d5e/events",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"a19bcfc9-3769-45bb-a9d2-0f5146f93d5e",
								"events"
							]
						}
					},
					"response": []
				}
			],
			"id": "afcb34be-8147-457f-9901-67f441cb1855"
		},
		{
			"name": "Souscription KO COffre non existante ou pas fournie ou vide",
			"item": [
				{
					"name": "Subscription KO COffer non correct",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e74c673d-fd0e-443b-848d-ee473faf252a",
								"exec": [
									"pm.test(\"Status code is 412\", function () {\r",
									"    pm.response.to.have.status(412);\r",
									"});\r",
									"\r",
									"pm.test(\"contextual offer is not applicable for the VIN\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextual offer is not applicable for the VIN\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "624d6984-b899-46f0-b4f4-124b591ee5a4",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer vide",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "680a1e11-be5b-4c89-9f9f-3f0d358ba047",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"contextualOfferId should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextualOfferId should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "33ee5a6f-c0e7-4285-a874-fb43cc724dce",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer non fournie",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "48fa9797-dfd6-405f-a711-1ff73d1a6dcc",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"contextualOfferId should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextualOfferId should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "2ed0f07c-3fd4-4106-a514-3999cc33a8f5",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				}
			],
			"id": "c659bda8-ff90-418c-9104-f909c4d52d79"
		},
		{
			"name": "Souscription KO Vin pas au bon format ou pas fournie ou vide",
			"item": [
				{
					"name": "Subscription KO Vin pas au bon format caractÃ¨res speciaux",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2ce9d264-c559-4975-9a54-5552daeed4c1",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "131d4601-4ccd-4c5b-bc33-d2d1b40359fc",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VF662222222-22222\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin not in the the right format less than 17 characters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e999ab17-b555-4943-88d9-60ee7774fba5",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "16ad8fa0-b2e7-45ec-ad85-8949adfb45f5",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VN22223000000000\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin not in the the right format more than 17 characters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9ce48bd7-6af1-4dce-927b-2259780158e0",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "894b7778-94f2-4a4a-b688-ae0c5fcc6065",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VN222230000000000000\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin vide",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5d59858a-d807-4b13-9882-99c008fae236",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"vin should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"vin should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "10288995-c57c-4250-86f6-c9f6bf9895ef",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer non fournie",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9f661549-0899-456d-b6af-103bf32871e3",
								"exec": [
									"\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"vin should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"vin should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "77e78304-e4e1-4599-8f34-59a0d6170352",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				}
			],
			"id": "2113e17b-be0f-476f-8533-9fd657680c15"
		}
	]
}