{
	"info": {
		"_postman_id": "6074b016-a35e-4fbe-af97-c6771381b367",
		"name": "CNRautomation Copy",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_uid": "26626745-6074b016-a35e-4fbe-af97-c6771381b367"
	},
	"item": [
		{
			"name": "Get the token",
			"item": [
				{
					"name": "cnr generate access_token",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "884f83d6-a6b5-4272-8ec5-6dbc846f4d72",
								"exec": [
									"// okta environment endpoint",
									"const AUD = \"https://sso-dev.renault.com/oauth2/austmw35vFS9ZhxVY416/v1/token\";",
									"//const AUD = \"https://sso-uat.renault.com/oauth2/austwoeshbCkPJyw1416/v1/token\";",
									"//const AUD = \"https://sso.renault.com/oauth2/aus133y6mks4ptDss417/v1/token\";",
									"   ",
									"// client id of your application",
									"const CLIENT_ID=\"irn-74772_dev_pkjwt_w7djluvltrxp\";",
									"  ",
									"// certificate kid (cf. https://synergyprod1.service-now.com/it?id=sc_cat_item&sys_id=04c550d9878d011096bb20aabbbb35c1 )",
									"const KID=\"2025-03-13-2511347\";",
									"  ",
									"// your certificate private key",
									"const PRIVATE_KEY = \"-----BEGIN PRIVATE KEY-----\\",
									"MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC/z56kyzwmNNmp\\",
									"A4zqqp43jPTqpU5TSpmR8r3NTtPuAfL5MUqjarsfGxiKDbFgUTv+DHSZIeAU3ZaJ\\",
									"Oa/Uclo4OKrq3wH2ZlLIuYz7lwbReSuAmE1WRKbLsEtO+qYw9OLrnzYPACF79Irp\\",
									"lydKjrFGV5vbckamUNAuoTKkh/8PKTsDANtik0X/KzwdwOI1guA78OSWREuH9xc5\\",
									"yBg+LfXf7JVQMerhVWerdkWfszKmzd7IHJvk5sZkm6d0ju6AZ4ewdEyozDQTdEdP\\",
									"32+tKgkusKNwNtl05AEFmx3PplecETz+1cLjkQVRVAmdz7Uw/AtV2cB3qG/jHH92\\",
									"po0o+ULxAgMBAAECggEAZwubJt0oSz5JUMtfgRJ4PU+0o/p6wbRqHEZUQV//6vWR\\",
									"Gt6oQnKsZGGiJUiF6kC6Ahme6kWQpKUGomIjW/azEVEgQV3dKAqAnuVQIDlaqF54\\",
									"SHWJ1ra7BOKJEr0FW3e0EPFPkW94jacqmaNisGNISYn3aUVTPzZbITHoiwuksvd9\\",
									"R9uhUuHDZ2WBSppVOuejW3jrK0Ea5gCCeBusBJtCyoewPa9oEgOyrHGxUwXqxQJ9\\",
									"1FCVODOofSTZRO0WWzuUs9bTF98dAy8flNrSSRBM8idRSgiedYSPguwz57VlSkBc\\",
									"zm1fsfWV0HQF4M7XxhmHy/tTuIeneiKP9phAwATLgQKBgQDlZ7kMv9CO15mOj+w3\\",
									"5BZhq9QmZq6v4awXbB4xRycpgJLoazwmK6V2VrgKmZ164Zy/7IfvVlqPVp1UbYRN\\",
									"Q+ecXuG8U1H0M/lBAShwRZJphPHEHlIiSOHsOsald4ZlWLPFFDWPK0A9xtQacd+3\\",
									"FqH253yZ2uaj/sugSG+aVHUHlQKBgQDWDC3a+nTXFKhb04xrzpE2HtOxaqcSb7S/\\",
									"DqbKDZnpPXpndc1qa/XTx8TR4PqRtOyxkU+d5IO3qNuNER3cGcJKQQbopK/nUttj\\",
									"0EwIKO0Hl66tKzKKoNjNmQK4/9C+FqaI9/0cZjOFtVtM2JsP7Lz7UgNXNpaioyb5\\",
									"o4oEoLTG7QKBgHl886gH0RhEn4K7P3rd5Oh2yhRIHszwM2X4EQlByECXYbWKTMFe\\",
									"LfM8u5yJe7e+0XdmeRrL3Yu5b/ptQTp18quCKAPHEEjGWYMObO8AOSh+ila1RAP6\\",
									"GwMyoU6xvM/hKNr+99pJKm1M5bjXg4V/i+io8Pi9z5Ub85R/p/LQNWX9AoGAf5XS\\",
									"32vaqTlPAS0fzkLam3/UfzQrUfnzqs547Ice7sAObgzx3DVt2kaBMvj/YkqNq2oK\\",
									"IvtK5/Zmp7dELSXNgaUxEQrZLvFchCpsp5B9eMEZBW9yON+XWzWRQeR58FRf/9SR\\",
									"spPYsiJfwXZ7NwrNuqAwDZQkRd0qJjMs2YVRPCECgYEA0Sd/SAdNOlonflgO1T/R\\",
									"YiC4zb6kvSI31VyYCmuXJBFF/ndUZ0uk3UPaPpAdb3p12/RjgYbQ7fkyhLv4I3lo\\",
									"nBspgzqpUmoAy6g8wrz78P6aCkLlmuW9evS3o1XvhPzFnvB7MZ43bKjaktx+/fET\\",
									"0Zy8uQlUJn88kCDglG+FjIo=\\",
									"-----END PRIVATE KEY-----\";",
									"   ",
									"//life time of the assertion in seconds",
									"const LIFE_TIME = 300;",
									"  ",
									"/********** END CONST ******************/",
									"   ",
									"var navigator = {};",
									"var window = {};",
									"pm.sendRequest('https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/8.0.20/jsrsasign-all-min.js', (err, res) => {",
									"eval(res.text());",
									"   ",
									"// Set headers for JWT",
									"var header = {",
									"    \"kid\": KID,",
									"    \"alg\": \"RS256\"",
									"};",
									"   ",
									"// Prepare timestamp in seconds",
									"var currentTimestamp = Math.floor(Date.now() / 1000);",
									"   ",
									"var data = {",
									"  \"aud\": AUD,",
									"  \"exp\": currentTimestamp + LIFE_TIME,",
									"  \"iss\": CLIENT_ID,",
									"  \"sub\": CLIENT_ID,",
									"  \"iat\": currentTimestamp,",
									"  \"jti\": generateUUID()",
									" ",
									"};",
									"   ",
									"var sHeader = JSON.stringify(header);",
									"var sPayload = JSON.stringify(data);",
									"   ",
									"var sJWT = KJUR.jws.JWS.sign(header.alg, sHeader, sPayload, PRIVATE_KEY);",
									"   ",
									"pm.environment.set('client_assertion', sJWT)",
									"});",
									" ",
									"function generateUUID() { ",
									"    var d = new Date().getTime();",
									"    var d2 = ((typeof performance !== 'undefined') && performance.now && (performance.now()*1000)) || 0;",
									"    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {",
									"        var r = Math.random() * 16;",
									"        if(d > 0){",
									"            r = (d + r)%16 | 0;",
									"            d = Math.floor(d/16);",
									"        } else {",
									"            r = (d2 + r)%16 | 0;",
									"            d2 = Math.floor(d2/16);",
									"        }",
									"        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);",
									"    });",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "bf426caf-0165-4aa7-aa45-d36d8b1c3b65",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"postman.setEnvironmentVariable(\"cnr_okta_token\", jsonData.access_token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "01c92142-f8fb-4237-99b6-238e2640d18d",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "client_credentials",
									"type": "text"
								},
								{
									"key": "scope",
									"value": "apis.default ",
									"type": "text"
								},
								{
									"key": "client_assertion_type",
									"value": "urn:ietf:params:oauth:client-assertion-type:jwt-bearer",
									"type": "text"
								},
								{
									"key": "client_assertion",
									"value": "{{client_assertion}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://sso-dev.renault.com/oauth2/austmw35vFS9ZhxVY416/v1/token",
							"protocol": "https",
							"host": [
								"sso-dev",
								"renault",
								"com"
							],
							"path": [
								"oauth2",
								"austmw35vFS9ZhxVY416",
								"v1",
								"token"
							]
						}
					},
					"response": []
				}
			],
			"id": "7a4c2f9c-1aba-4333-98e1-c762b1a412ea"
		},
		{
			"name": "Confirmation de souscription OK",
			"item": [
				{
					"name": "Get the eligible services",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6d9467f7-3aa9-4a5a-9aa0-b53b937eb5f4",
								"exec": [
									"var jsonData = JSON.parse(responseBody);\r",
									"postman.setEnvironmentVariable(\"FirstCOffer\", jsonData[0].contextualOfferId);\r",
									"\r",
									"var jsonData = JSON.parse(responseBody);\r",
									"postman.setEnvironmentVariable(\"FirstGOffer\", jsonData[0].genericOfferId);\r",
									"\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "df59f5f7-e38b-46ef-8788-14b02fae1c0c",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/eligible-offers",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"eligible-offers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "179e5c1a-faa0-4124-b393-ad5f25237f73",
								"exec": [
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"var vin = pm.environment.get(\"vin\");\r",
									"pm.test(\"The vin >\"+vin+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(vin);\r",
									"});\r",
									"\r",
									"var FirstCOffer = pm.environment.get(\"FirstCOffer\");\r",
									"pm.test(\"The cOffer >\"+FirstCOffer+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(FirstCOffer);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "a6db8f84-b96c-4036-becd-09297a92c753",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"{{FirstCOffer}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "32c18e7d-de79-47d0-8e0c-f2352a0fab1d",
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "7974f50c-0b73-4cb0-be56-5e484620ac96",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"genericOfferId\": \"{{FirstGOffer}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/event",
							"host": [
								"{{url}}"
							],
							"path": [
								"event"
							]
						}
					},
					"response": []
				},
				{
					"name": "End the subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e4c977b8-3fee-45cf-ae5e-268dc4cb9016",
								"exec": [
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"var vin = pm.environment.get(\"vin\");\r",
									"pm.test(\"The vin >\"+vin+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(vin);\r",
									"});\r",
									"\r",
									"var FirstGOffer = pm.environment.get(\"FirstGOffer\");\r",
									"pm.test(\"The gOffer >\"+FirstGOffer+\"< is correct\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(FirstGOffer);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "5bab7249-1f73-489e-b771-3e270dcc963a",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/{{FirstGOffer}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"{{FirstGOffer}}"
							]
						}
					},
					"response": []
				}
			],
			"id": "af667d89-7647-4fc7-b44c-b9165af6d5a2"
		},
		{
			"name": "Get the subscriptions for a VIN OK",
			"item": [
				{
					"name": "Get the subscriptions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "02c90667-d68d-4463-9a58-eaec67b3cfc5",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "fc0a3384-d825-4d13-8bd4-b69628e19f33",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/{{vin}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"{{vin}}",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get the subscription events",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c89fbf2a-853b-444e-b3e4-9603e41470b5",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "544276a5-79af-4c38-a121-8e905b23c703",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{url}}/subscriptions/a19bcfc9-3769-45bb-a9d2-0f5146f93d5e/events",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions",
								"a19bcfc9-3769-45bb-a9d2-0f5146f93d5e",
								"events"
							]
						}
					},
					"response": []
				}
			],
			"id": "8c5ecc8e-e94e-400e-97dc-ca950f6e971d"
		},
		{
			"name": "Souscription KO COffre not existing or not delivered",
			"item": [
				{
					"name": "Subscription KO COffer non correct",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "71fbb5fe-bfa1-499c-819d-5ac1bfc92c68",
								"exec": [
									"pm.test(\"Status code is 412\", function () {\r",
									"    pm.response.to.have.status(412);\r",
									"});\r",
									"\r",
									"pm.test(\"contextual offer is not applicable for the VIN\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextual offer is not applicable for the VIN\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "7d335547-b0cc-4fc7-8bc4-618edb87cddd",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer vide",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "25cc9376-d7f1-4121-af78-6cfd7a9be3ce",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"contextualOfferId should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextualOfferId should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "51096440-fe9f-4a6b-9a18-858bdaddfca0",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\",\r\n  \"contextualOfferId\": \"\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer non fournie",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "919ba0f6-2474-42d7-b666-7a88f857d7b9",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"contextualOfferId should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"contextualOfferId should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "1ee5cd09-1de5-4a0b-b7f4-e53d0d13363f",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"{{vin}}\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				}
			],
			"id": "6f4063a0-c1b7-4101-a0ff-fa2c749a6e82"
		},
		{
			"name": "Souscription KO Vin in wrong format not delivered or empty",
			"item": [
				{
					"name": "Subscription KO Vin not in the right format with special characters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0d570a9c-dacd-4f5d-95dd-bafda2c13cfd",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "89e23c60-7971-466d-af1f-173c5c37142c",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VF662222222-22222\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin not in the the right format less than 17 characters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "31045688-fbca-4e8f-8c1c-9328b7546f7e",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "c0819f8a-8b9e-469e-898a-e18de8f70172",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VN22223000000000\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin not in the the right format more than 17 characters",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8566df98-453e-4afd-b61a-c05a9da1817a",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"The format for the VIN is invalid\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"The format for the VIN is invalid\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "40528ea7-9a57-4dec-a8a6-bae55e750152",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"VN222230000000000000\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO Vin empty",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "598a9c75-f337-44f1-9ff3-4d932ae4b566",
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"\r",
									"pm.test(\"vin should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"vin should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "eac8022d-6910-480b-b7d5-dfdf01c611e2",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"vin\": \"\",\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription KO COffer not delivered",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4d8606da-ec2f-4a6b-85ab-f6612e581ac5",
								"exec": [
									"\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"pm.test(\"vin should not be empty\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"vin should not be empty\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"id": "221551e8-d433-4153-bddb-330028384f30",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{cnr_okta_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"contextualOfferId\": \"CONTEXTUAL_OFFER_2\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{url}}/subscriptions",
							"host": [
								"{{url}}"
							],
							"path": [
								"subscriptions"
							]
						}
					},
					"response": []
				}
			],
			"id": "41879eb7-3a59-4270-b84e-c27269a4314e"
		}
	]
}